<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chronicles of Aethel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for a retro 16-bit feel */
        body {
            font-family: 'Press Start 2P', cursive;
            background-color: #0f172a;
            color: #cbd5e1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            image-rendering: optimizeSpeed;
            image-rendering: -moz-crisp-edges;
            image-rendering: -o-crisp-edges;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: pixelated;
            -ms-interpolation-mode: nearest-neighbor;
        }

        .game-container {
            width: 100%;
            max-width: 640px;
            border: 8px solid #475569;
            border-radius: 0;
            overflow: hidden;
            background-color: #1e293b;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
        }

        .game-image {
            width: 100%;
            height: auto;
            display: block;
            border-bottom: 8px solid #475569;
            background-color: #000;
            padding: 8px; /* give some padding so 16x16 sprites look framed */
            box-sizing: border-box;
            text-align: center;
        }
        .game-image svg {
            width: 128px;
            height: 128px;
            image-rendering: pixelated;
        }

        .game-display {
            flex-grow: 1;
            padding: 1.5rem;
            border-bottom: 8px solid #475569;
            white-space: pre-wrap;
            overflow-y: auto;
            max-height: 400px;
            line-height: 1.8;
            color: #e2e8f0;
            background-color: #334155;
        }

        .choices-container {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .choice-button {
            background-color: #10b981;
            color: #0f172a;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            text-align: left;
            transition: background-color 0.1s ease;
            box-shadow: 2px 2px 0px #1e293b;
        }

        .choice-button:hover {
            background-color: #059669;
            box-shadow: 1px 1px 0px #1e293b;
        }

         .choice-button:active {
             background-color: #047857;
             box-shadow: 0px 0px 0px #1e293b;
             transform: translate(2px, 2px);
         }

        .choice-button:disabled {
            background-color: #64748b;
            color: #cbd5e1;
            cursor: not-allowed;
            box-shadow: 2px 2px 0px #475569;
        }
    </style>
</head>
<body>

<div class="game-container">
    <div id="game-image" class="game-image" aria-hidden="true"></div>
    <div id="game-display" class="game-display">
        Loading...
    </div>
    <div id="choices-container" class="choices-container">
        </div>
</div>

<script>
    // --- Embedded SVG assets (inline, self-contained) ---
    const assets = {
        player: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" shape-rendering="crispEdges">
  <rect width="16" height="16" fill="none"/>
  <rect x="5" y="1" width="6" height="1" fill="#6b4226"/>
  <rect x="4" y="2" width="8" height="1" fill="#6b4226"/>
  <rect x="4" y="3" width="2" height="1" fill="#6b4226"/>
  <rect x="10" y="3" width="2" height="1" fill="#6b4226"/>
  <rect x="6" y="3" width="4" height="2" fill="#f2c9b6"/>
  <rect x="6" y="5" width="1" height="1" fill="#000"/>
  <rect x="9" y="5" width="1" height="1" fill="#000"/>
  <rect x="5" y="6" width="6" height="3" fill="#2563eb"/>
  <rect x="5" y="9" width="3" height="3" fill="#1f2937"/>
  <rect x="8" y="9" width="3" height="3" fill="#1f2937"/>
  <rect x="5" y="12" width="2" height="1" fill="#2d3748"/>
  <rect x="9" y="12" width="2" height="1" fill="#2d3748"/>
</svg>`,

        villager: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" shape-rendering="crispEdges">
  <rect width="16" height="16" fill="none"/>
  <rect x="4" y="1" width="8" height="2" fill="#7c3aed"/>
  <rect x="5" y="3" width="6" height="1" fill="#7c3aed"/>
  <rect x="6" y="4" width="4" height="2" fill="#f3d7c4"/>
  <rect x="6" y="5" width="1" height="1" fill="#000"/>
  <rect x="9" y="5" width="1" height="1" fill="#000"/>
  <rect x="4" y="6" width="8" height="5" fill="#4b5563"/>
  <rect x="6" y="9" width="4" height="2" fill="#374151"/>
</svg>`,

        blacksmith: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" shape-rendering="crispEdges">
  <rect width="16" height="16" fill="none"/>
  <rect x="4" y="1" width="8" height="2" fill="#444"/>
  <rect x="5" y="3" width="6" height="1" fill="#444"/>
  <rect x="6" y="4" width="4" height="2" fill="#f0c8ad"/>
  <rect x="4" y="6" width="8" height="5" fill="#a16207"/>
  <rect x="5" y="11" width="6" height="1" fill="#7c2d12"/>
  <rect x="2" y="9" width="1" height="3" fill="#6b7280"/>
  <rect x="1" y="9" width="1" height="1" fill="#374151"/>
</svg>`,

        garden: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" shape-rendering="crispEdges">
  <rect width="16" height="16" fill="none"/>
  <rect x="2" y="6" width="12" height="6" fill="#6b4f2b"/>
  <rect x="3" y="7" width="2" height="2" fill="#6ab04c"/>
  <rect x="6" y="7" width="2" height="2" fill="#2ecc71"/>
  <rect x="9" y="7" width="2" height="2" fill="#27ae60"/>
  <rect x="3" y="10" width="2" height="1" fill="#145214"/>
  <rect x="6" y="10" width="2" height="1" fill="#145214"/>
  <rect x="9" y="10" width="2" height="1" fill="#145214"/>
  <rect x="1" y="5" width="14" height="1" fill="#c7b299"/>
</svg>`,

        beach: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" shape-rendering="crispEdges">
  <rect width="16" height="16" fill="none"/>
  <rect x="0" y="0" width="16" height="6" fill="#93c5fd"/>
  <rect x="0" y="6" width="16" height="4" fill="#0ea5e9"/>
  <rect x="0" y="10" width="16" height="6" fill="#f3d19c"/>
  <rect x="12" y="1" width="2" height="2" fill="#f59e0b"/>
</svg>`,

        chest: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" shape-rendering="crispEdges">
  <rect width="16" height="16" fill="none"/>
  <rect x="3" y="7" width="10" height="5" fill="#8b5e34"/>
  <rect x="3" y="5" width="10" height="2" fill="#c27a2a"/>
  <rect x="7" y="9" width="2" height="2" fill="#ffd166"/>
  <rect x="7.5" y="9.5" width="1" height="1" fill="#826d3b"/>
</svg>`,

        tree: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" shape-rendering="crispEdges">
  <rect width="16" height="16" fill="none"/>
  <rect x="7" y="10" width="2" height="3" fill="#7c4a2e"/>
  <rect x="4" y="5" width="8" height="4" fill="#16a34a"/>
  <rect x="5" y="3" width="6" height="2" fill="#15803d"/>
</svg>`,

        castle: `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" shape-rendering="crispEdges">
  <rect width="16" height="16" fill="none"/>
  <rect x="2" y="6" width="12" height="6" fill="#bdbdbd"/>
  <rect x="2" y="4" width="2" height="2" fill="#9e9e9e"/>
  <rect x="12" y="4" width="2" height="2" fill="#9e9e9e"/>
  <rect x="4" y="5" width="1" height="1" fill="#616161"/>
  <rect x="6" y="5" width="1" height="1" fill="#616161"/>
  <rect x="8" y="5" width="1" height="1" fill="#616161"/>
  <rect x="10" y="5" width="1" height="1" fill="#616161"/>
  <rect x="7" y="8" width="2" height="4" fill="#6b4e2e"/>
</svg>`
    };

    // Game state variables
    let gameState = {
        currentPage: 'start',
        craftingSkill: 0,
        botanySkill: 0,
        artsSkill: 0,
        happiness: 0,
        lazyDaysSpent: 0,
        maxLazyDaysBeforeRepetition: 10
    };

    // --- Game Content ---
    const gameContent = {
        start: {
            text: `The sunlight of Aethel falls gently upon your face, a warmth that promises not just a day, but a century of possibility. At 25 years, your Prime has just begun, a vast expanse of life stretching before you. The village of Oakhaven is your home, but the whispers of distant shores and lively gatherings are strong in your ear.

Elder Elara, her eyes holding the wisdom of 140 summers, sits beside you on a moss-covered stone. "The young ones, some of them," she sighs, her voice like rustling leaves, "they see the years ahead as an endless feast. Parties, travel, fleeting fancies. And while there is joy in such things, the deepest well of contentment comes from a life dedicated to creation, to understanding, to building something that will last."

But the call of the easy life is strong. The nearby coastal city of Sylvane is known for its perpetual festivals and sun-drenched beaches. The stories of carefree days and nights are alluring.

What will you do?`,
            choices: [
                { text: "Journey to Sylvane for Sun and Festivities (The 'Lazy Path')", nextPage: 'lazy_path_intro' },
                { text: "Dedicate yourself to a Skill in Oakhaven (The Path of Enduring Craft)", nextPage: 'skill_choice' }
            ],
            image: 'tree'
        },
        skill_choice: {
            text: `You nod, considering Elder Elara's words. The idea of building something lasting resonates with you. Oakhaven offers many paths to mastery, each requiring patience and dedication over years. Which skill calls to you?`,
            choices: [
                { text: "The Shaping of Stone and Steel (Craftsmanship)", nextPage: 'crafting_start' },
                { text: "The Secrets of Root and Bloom (Botany)", nextPage: 'botany_start' },
                { text: "The Expression of Soul Through Form (Arts)", nextPage: 'arts_start' }
            ],
            image: 'castle'
        },
        lazy_path_intro: {
             text: `You decide the elder's wisdom can wait. The lure of Sylvane is too strong. You pack a light bag and set off towards the coast, leaving the quiet dedication of Oakhaven behind for now.

The journey is easy, filled with pleasant scenery. Soon, the salty air hits your face, and the distant sound of music grows louder. Sylvane is everything the stories promised – vibrant, lively, and seemingly without a care in the world.`,
             choices: [
                 { text: "Arrive in Sylvane", nextPage: 'lazy_path_sylvane' }
             ],
             image: 'beach'
        },
        lazy_path_sylvane: {
            getText: function() {
                let baseText = `You are in Sylvane. The sun is warm, the music is playing, and the air is filled with laughter. Your current happiness is ${gameState.happiness}.`;
                 if (gameState.lazyDaysSpent > gameState.maxLazyDaysBeforeRepetition) {
                    baseText += `\n\nAnother day, another party...`;
                 }
                 return baseText;
            },
            choices: [
                { text: "Attend a beach party (+5 Happiness)", action: 'increaseHappiness', value: 5, nextPage: 'lazy_path_sylvane' },
                { text: "Gamble at the festival (+/- Gold, small chance of big win, high chance of small loss)", action: 'gamble', nextPage: 'lazy_path_sylvane' },
                { text: "Flirt with a local (Shallow interaction)", action: 'flirt', nextPage: 'lazy_path_sylvane' },
                { text: "Buy new clothes (Spend Gold, temporary style boost)", action: 'buyClothes', nextPage: 'lazy_path_sylvane' },
                { text: "Think about Oakhaven (Consider returning)", nextPage: 'lazy_consider_oakhaven' }
            ],
             onEnter: function() {
                gameState.lazyDaysSpent++;
             },
             image: 'beach'
        },
         lazy_consider_oakhaven: {
             text: `You pause amidst the revelry...`,
             choices: [
                 { text: "Return to Oakhaven", nextPage: 'return_to_oakhaven' },
                 { text: "Stay in Sylvane, the party continues!", nextPage: 'lazy_path_sylvane' }
             ],
             image: 'beach'
         },
        return_to_oakhaven: {
             text: `Leaving the endless summer behind...`,
             choices: [
                 { text: "Begin anew, choose a skill", nextPage: 'skill_choice' }
             ],
             image: 'tree'
        },
        crafting_start: {
            text: `You choose the path of the craftsman...`,
            choices: [
                 { text: "Gather Iron Ore", action: 'gatherOre', nextPage: 'crafting_gather' }
            ],
             onEnter: function() {
                 gameState.lazyDaysSpent = 0;
                 gameState.happiness = 0;
             },
             image: 'blacksmith'
        },
        crafting_gather: {
             getText: function() {
                 return `You spend time in the foothills, searching for iron ore. The work is tiring, but the feel of the earth and rock is grounding. Your Crafting Skill is currently: ${gameState.craftingSkill}.`;
             },
             choices: [
                 { text: "Continue Gathering (+1 Crafting Skill, small chance of finding rare ore)", action: 'increaseCrafting', nextPage: 'crafting_gather' },
                 { text: "Attempt a simple smelt (Requires Crafting Skill)", action: 'attemptSmelt', nextPage: 'crafting_smelt_result' },
                 { text: "Return to Borin", nextPage: 'crafting_borin' }
             ],
             image: 'tree'
        },
         crafting_smelt_result: {
             getText: function() {
                 return gameState.lastActionMessage || "You attempt to smelt the ore.";
             },
             choices: [
                 { text: "Continue", nextPage: 'crafting_gather'}
             ],
             image: 'blacksmith'
         },
         crafting_borin: {
             getText: function() {
                 return `Borin looks at your progress... Your Crafting Skill is ${gameState.craftingSkill}.`;
             },
             choices: [
                 { text: "Go back to gathering/smelting", nextPage: 'crafting_gather' },
                 { text: "Ask about advanced techniques (Requires higher Crafting Skill)", action: 'askAdvancedCrafting', nextPage: 'crafting_advanced_talk' }
             ],
             image: 'blacksmith'
         },
         crafting_advanced_talk: {
             getText: function() {
                 return gameState.lastActionMessage || "Borin speaks of advanced techniques.";
             },
             choices: [
                 { text: "Understood", nextPage: 'crafting_borin' }
             ],
             image: 'blacksmith'
         },
        botany_start: {
            text: `You choose the path of the botanist...`,
            choices: [
                 { text: "Tend the Garden", action: 'tendGarden', nextPage: 'botany_garden' }
            ],
             onEnter: function() {
                 gameState.lazyDaysSpent = 0;
                 gameState.happiness = 0;
             },
             image: 'garden'
        },
         botany_garden: {
             getText: function() {
                 return `You spend time in the garden... Your Botany Skill is currently: ${gameState.botanySkill}.`;
             },
             choices: [
                 { text: "Water and Weed (+1 Botany Skill, small chance of finding rare seed)", action: 'increaseBotany', nextPage: 'botany_garden' },
                 { text: "Attempt to identify a plant (Requires Botany Skill)", action: 'identifyPlant', nextPage: 'botany_identify_result' },
                 { text: "Talk to Faelar", nextPage: 'botany_faelar' }
             ],
             image: 'garden'
         },
         botany_identify_result: {
             getText: function() {
                 return gameState.lastActionMessage || "You attempt to identify a plant.";
             },
             choices: [
                 { text: "Continue", nextPage: 'botany_garden'}
             ],
             image: 'garden'
         },
         botany_faelar: {
             getText: function() {
                 return `Faelar smiles gently... Your Botany Skill is ${gameState.botanySkill}.`;
             },
             choices: [
                 { text: "Go back to tending the garden", nextPage: 'botany_garden' },
                 { text: "Ask about rare flora (Requires higher Botany Skill)", action: 'askAdvancedBotany', nextPage: 'botany_advanced_talk' }
             ],
             image: 'garden'
         },
         botany_advanced_talk: {
             getText: function() {
                 return gameState.lastActionMessage || "Faelar speaks of rare flora.";
             },
             choices: [
                 { text: "Understood", nextPage: 'botany_faelar' }
             ],
             image: 'garden'
         },
        arts_start: {
            text: `You choose the path of the artist...`,
            choices: [
                 { text: "Practice Music", action: 'practiceMusic', nextPage: 'arts_practice' }
            ],
             onEnter: function() {
                 gameState.lazyDaysSpent = 0;
                 gameState.happiness = 0;
             },
             image: 'castle'
        },
         arts_practice: {
             getText: function() {
                 return `You spend time practicing your chosen art... Your Arts Skill is currently: ${gameState.artsSkill}.`;
             },
             choices: [
                 { text: "Practice more (+1 Arts Skill, small chance of inspiration)", action: 'increaseArts', nextPage: 'arts_practice' },
                 { text: "Attempt a simple piece (Requires Arts Skill)", action: 'attemptPiece', nextPage: 'arts_piece_result' },
                 { text: "Talk to Lyra", nextPage: 'arts_lyra' }
             ],
             image: 'castle'
         },
         arts_piece_result: {
             getText: function() {
                 return gameState.lastActionMessage || "You attempt a simple piece.";
             },
             choices: [
                 { text: "Continue", nextPage: 'arts_practice'}
             ],
             image: 'castle'
         },
         arts_lyra: {
             getText: function() {
                 return `Lyra listens to your practice... Your Arts Skill is ${gameState.artsSkill}.`;
             },
             choices: [
                 { text: "Go back to practicing", nextPage: 'arts_practice' },
                 { text: "Ask about ancient forms (Requires higher Arts Skill)", action: 'askAdvancedArts', nextPage: 'arts_advanced_talk' }
             ],
             image: 'castle'
         },
         arts_advanced_talk: {
             getText: function() {
                 return gameState.lastActionMessage || "Lyra speaks of ancient forms.";
             },
             choices: [
                 { text: "Understood", nextPage: 'arts_lyra' }
             ],
             image: 'castle'
         }
    };

    // --- Game Logic ---
    const gameImage = document.getElementById('game-image');
    const gameDisplay = document.getElementById('game-display');
    const choicesContainer = document.getElementById('choices-container');

    // Function to update the display based on the current game state
    function updateDisplay() {
        const page = gameContent[gameState.currentPage];

        // Call onEnter first so page.getText observes updated state
        if (typeof page.onEnter === 'function') {
            page.onEnter();
        }

        let textToShow = typeof page.getText === 'function' ? page.getText() : page.text;
        gameDisplay.textContent = textToShow;

        // Update image (use embedded assets)
        if (page.image && assets[page.image]) {
            gameImage.innerHTML = assets[page.image];
            gameImage.style.display = 'block';
        } else {
            gameImage.innerHTML = '';
            gameImage.style.display = 'none';
        }

        // Clear previous choices
        choicesContainer.innerHTML = '';

        // Add new choices
        page.choices.forEach(choice => {
            const button = document.createElement('button');
            button.classList.add('choice-button');
            button.textContent = choice.text;

            // Add event listener
            button.addEventListener('click', () => {
                handleChoice(choice);
            });

             if (choice.action === 'askAdvancedCrafting' && gameState.craftingSkill < 10) {
                 button.disabled = true;
                 button.textContent += " (Requires 10 Crafting Skill)";
             }
             if (choice.action === 'askAdvancedBotany' && gameState.botanySkill < 10) {
                 button.disabled = true;
                 button.textContent += " (Requires 10 Botany Skill)";
             }
             if (choice.action === 'askAdvancedArts' && gameState.artsSkill < 10) {
                 button.disabled = true;
                 button.textContent += " (Requires 10 Arts Skill)";
             }
             if (choice.action === 'attemptSmelt' && gameState.craftingSkill < 3) {
                 button.disabled = true;
                 button.textContent += " (Requires 3 Crafting Skill)";
             }
             if (choice.action === 'identifyPlant' && gameState.botanySkill < 3) {
                 button.disabled = true;
                 button.textContent += " (Requires 3 Botany Skill)";
             }
             if (choice.action === 'attemptPiece' && gameState.artsSkill < 3) {
                 button.disabled = true;
                 button.textContent += " (Requires 3 Arts Skill)";
             }

            choicesContainer.appendChild(button);
        });
    }

    // Function to handle player choices
    function handleChoice(choice) {
        // Perform action if defined
        if (choice.action) {
            performAction(choice.action, choice.value);
        }

        // Move to the next page
        if (choice.nextPage) {
            gameState.currentPage = choice.nextPage;
            updateDisplay();
        } else {
            // No nextPage (some actions may only set messages) — refresh current page
            updateDisplay();
        }
    }

    // Function to perform actions based on choice
    function performAction(action, value) {
        gameState.lastActionMessage = "";

        switch (action) {
            case 'increaseHappiness':
                gameState.happiness += (value || 0);
                if (gameState.lazyDaysSpent <= gameState.maxLazyDaysBeforeRepetition / 2) {
                     gameState.lastActionMessage = "You enjoy the party. The music is loud, the company is cheerful.";
                } else if (gameState.lazyDaysSpent <= gameState.maxLazyDaysBeforeRepetition) {
                     gameState.lastActionMessage = "Another party. It's fun, but feels a little familiar now.";
                } else {
                     gameState.lastActionMessage = "You attend the party. It's... a party. Just like yesterday.";
                 }
                break;
            case 'gamble':
                const winChance = 0.2;
                const bigWin = 50;
                const smallLoss = 5;
                if (Math.random() < winChance) {
                    gameState.lastActionMessage = `You got lucky and won big! (+${bigWin} Gold - if gold existed)`;
                } else {
                     gameState.lastActionMessage = `You lost a little. Better luck next time. (-${smallLoss} Gold - if gold existed)`;
                }
                 if (gameState.lazyDaysSpent > gameState.maxLazyDaysBeforeRepetition) {
                     gameState.lastActionMessage += " It doesn't really change anything in the long run, though.";
                 }
                break;
            case 'flirt':
                 const flirtMessages = [
                     "You exchange pleasantries. They seem nice, for now.",
                     "A brief, charming conversation. You won't remember their name tomorrow.",
                     "A fleeting connection. Like a spark that quickly fades."
                 ];
                 gameState.lastActionMessage = flirtMessages[Math.floor(Math.random() * flirtMessages.length)];
                 if (gameState.lazyDaysSpent > gameState.maxLazyDaysBeforeRepetition) {
                     gameState.lastActionMessage += " Just another face in the crowd.";
                 }
                break;
            case 'buyClothes':
                 gameState.lastActionMessage = "You buy some flashy new clothes. You feel good... for a little while.";
                 if (gameState.lazyDaysSpent > gameState.maxLazyDaysBeforeRepetition) {
                     gameState.lastActionMessage += " They'll be out of style next week anyway.";
                 }
                break;
            case 'increaseCrafting':
                gameState.craftingSkill++;
                 gameState.lastActionMessage = "You practice your craft. You feel a little more confident in your hands.";
                break;
             case 'attemptSmelt':
                 if (gameState.craftingSkill >= 3) {
                     const successChance = gameState.craftingSkill * 0.1;
                     if (Math.random() < successChance) {
                         gameState.lastActionMessage = "Success! You smelted the ore into usable metal.";
                     } else {
                         gameState.lastActionMessage = "You tried to smelt the ore, but it didn't quite work out.";
                     }
                 } else {
                     gameState.lastActionMessage = "You don't have enough skill to attempt this yet.";
                 }
                 break;
             case 'askAdvancedCrafting':
                 if (gameState.craftingSkill >= 10) {
                     gameState.lastActionMessage = "Borin nods slowly. 'Advanced techniques require a foundation built over years.'";
                 } else {
                     gameState.lastActionMessage = "Borin grunts. 'You're not ready yet. Focus on the basics.'";
                 }
                 break;
            case 'increaseBotany':
                gameState.botanySkill++;
                 gameState.lastActionMessage = "You tend the plants. They seem a little healthier.";
                break;
             case 'identifyPlant':
                 if (gameState.botanySkill >= 3) {
                      const successChance = gameState.botanySkill * 0.1;
                      if (Math.random() < successChance) {
                          gameState.lastActionMessage = "You successfully identified the plant!";
                      } else {
                          gameState.lastActionMessage = "You examine the plant, but its secrets remain hidden for now.";
                      }
                 } else {
                     gameState.lastActionMessage = "You don't have enough skill to identify this yet.";
                 }
                 break;
             case 'askAdvancedBotany':
                 if (gameState.botanySkill >= 10) {
                     gameState.lastActionMessage = "Faelar's eyes light up. 'Ah, you're ready to learn of the deeper connections.'";
                 } else {
                     gameState.lastActionMessage = "Faelar smiles gently. 'Patience, young one. The plants will reveal their secrets in time.'";
                 }
                 break;
            case 'increaseArts':
                gameState.artsSkill++;
                 gameState.lastActionMessage = "You practice your art. You feel a flicker of inspiration.";
                break;
             case 'attemptPiece':
                 if (gameState.artsSkill >= 3) {
                      const successChance = gameState.artsSkill * 0.1;
                      if (Math.random() < successChance) {
                          gameState.lastActionMessage = "You completed a simple piece!";
                      } else {
                          gameState.lastActionMessage = "You attempted to create a piece, but it didn't quite come together.";
                      }
                 } else {
                      gameState.lastActionMessage = "You don't have enough skill to create a piece yet.";
                 }
                 break;
             case 'askAdvancedArts':
                 if (gameState.artsSkill >= 10) {
                     gameState.lastActionMessage = "Lyra's eyes gleam. 'You seek the ancient forms? Listen closely...'";
                 } else {
                     gameState.lastActionMessage = "Lyra smiles. 'Keep practicing the fundamentals.'";
                 }
                 break;
        }
    }

    // Initialize the game
    document.addEventListener('DOMContentLoaded', () => {
        updateDisplay();
    });

</script>

</body>
</html>
